<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktiver Lernplan: Französisch A1 Express</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Focus Palette (Stone, Teal, White) -->
    <!-- Application Structure Plan: A 7-day, tab-based interactive learning plan. The user navigates between days, each containing a focused, collapsible task. This structure breaks down the content into highly manageable, daily chunks, crucial for a compressed timeline. A central, filterable vocabulary list serves as a constant reference tool. A progress bar and dashboard provide a high-level overview to maintain motivation. This is more engaging and goal-oriented than a static document. -->
    <!-- Visualization & Content Choices: Report Info: PDF Grammar Units -> Goal: Structure the learning journey -> Viz/Presentation: Doughnut Chart (Chart.js) showing topic distribution over 7 days. Interaction: None, it's a static overview. Justification: Provides a quick, visual summary of the intense learning path. Report Info: Vocabulary List -> Goal: Active recall practice -> Viz/Presentation: HTML/CSS flashcards. Interaction: Click to flip. Justification: More effective for memorization under time pressure than a static list. Report Info: Daily tasks -> Goal: Guided learning -> Viz/Presentation: Collapsible accordion sections. Interaction: Click to expand/collapse. Justification: Keeps the UI clean and focused on the current day's tasks, preventing overwhelm. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
        }
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .task-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            margin-bottom: 1rem;
        }
        .vocab-card {
            perspective: 1000px;
            cursor: pointer;
        }
        .vocab-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            min-height: 80px;
        }
        .vocab-card.is-flipped .vocab-card-inner {
            transform: rotateY(180deg);
        }
        .vocab-card-front, .vocab-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #e7e5e4; /* stone-200 */
        }
        .vocab-card-front {
            background-color: #fcfcfc;
        }
        .vocab-card-back {
            background-color: #f0fdfa; /* teal-50 */
            color: #134e4a; /* teal-900 */
            transform: rotateY(180deg);
        }
        .accordion-content {
            display: none;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body class="text-stone-800">

    <div class="main-container p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-teal-700">Interaktiver Lernplan</h1>
            <p class="text-lg text-stone-600 mt-2">Dein 7-Tage-Express-Plan (24. Sep. - 1. Okt.)</p>
        </header>

        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="task-card mb-8">
                <h2 class="text-2xl font-bold mb-4 text-center">Dein Lernfortschritt</h2>
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="w-full md:w-2/3">
                        <p class="text-stone-700 mb-4">
                            Dieser Plan ist straff und kompakt, um dich in nur einer Woche auf den 1. Oktober vorzubereiten. Jeder Tag hat einen klaren Fokus, um dich nicht zu überfordern. Konzentriere dich auf die Aufgaben des Tages und nutze die Vokabelkarten zur schnellen Wiederholung.
                        </p>
                        <div class="w-full bg-stone-200 rounded-full h-4 mb-4">
                            <div id="progressBar" class="bg-teal-500 h-4 rounded-full" style="width: 0%;"></div>
                        </div>
                        <p id="progressText" class="text-center font-semibold text-teal-700">Wähle einen Tag, um zu starten!</p>
                    </div>
                    <div class="w-full md:w-1/3">
                         <div class="chart-container">
                            <canvas id="planChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Navigation Tabs -->
            <nav id="day-navigation" class="flex flex-wrap justify-center gap-2 mb-8">
                <button data-day="1" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 1</button>
                <button data-day="2" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 2</button>
                <button data-day="3" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 3</button>
                <button data-day="4" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 4</button>
                <button data-day="5" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 5</button>
                <button data-day="6" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 6</button>
                <button data-day="7" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Tag 7</button>
                <button data-day="8" class="tab-btn day-btn py-2 px-6 bg-white rounded-full font-semibold shadow-sm border border-stone-200">Wortschatz</button>
            </nav>

            <!-- Content Sections -->
            <div id="content-container">
                <!-- Days Content will be injected here by JS -->
            </div>

            <!-- Vocabulary Section -->
            <section id="day-8" class="day-content hidden">
                 <div class="task-card">
                    <h2 class="text-2xl font-bold mb-4">Gesamter Wortschatz</h2>
                    <p class="mb-4">Hier findest du alle Vokabeln. Du kannst sie nach Kategorie filtern oder direkt nach einem Wort suchen.</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <input type="text" id="vocabSearch" placeholder="Suchen..." class="w-full md:w-auto flex-grow p-2 border border-stone-300 rounded-md">
                        <select id="vocabFilter" class="p-2 border border-stone-300 rounded-md">
                            <option value="all">Alle Kategorien</option>
                        </select>
                    </div>
                    <div id="full-vocab-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <!-- Full vocab list will be injected here -->
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const vocabulary = {
                "Wichtige Lernbegriffe": [
                    { fr: "le verbe", de: "das Verb" },
                    { fr: "le nom", de: "das Nomen" },
                    { fr: "l'adjectif (m)", de: "das Adjektiv" },
                    { fr: "le présent", de: "die Gegenwart (Zeitform)" },
                    { fr: "la question", de: "die Frage" },
                    { fr: "la phrase", de: "der Satz" },
                    { fr: "singulier", de: "Einzahl" },
                    { fr: "pluriel", de: "Mehrzahl" },
                ],
                "La vie et les relations": [
                    { fr: "la vie", de: "das Leben" }, { fr: "la vie personnelle", de: "Persönliches Leben / das private Leben" },
                    { fr: "avoir des enfants", de: "Kinder haben" }, { fr: "s'installer", de: "sich einrichten, sich niederlassen" },
                    { fr: "se marier avec quelqu'un", de: "jemanden heiraten" }, { fr: "mourir", de: "sterben, aussterben" },
                    { fr: "la naissance", de: "die Geburt" }, { fr: "naître", de: "geboren werden" },
                    { fr: "en ville", de: "in der Stadt" }, { fr: "en banlieue", de: "im Vorort" },
                    { fr: "à la campagne", de: "auf dem Land" }, { fr: "se séparer", de: "sich trennen" },
                    { fr: "la vie professionnelle", de: "das Berufsleben, das Arbeitsleben" }, { fr: "s'associer à quelqu'un", de: "sich mit jmdm. assoziieren / zusammenschliessen" },
                    { fr: "un célibataire / une célibataire", de: "ein Single /ein Junggeselle/ eine Junggesellin" }, { fr: "être célibataire", de: "ledig sein / Single sein" },
                    { fr: "un citadin/une citadine", de: "ein Stadtbewohner, eine Stadtbewohnerin" }, { fr: "un couple", de: "ein Paar; ein Ehepaar" },
                    { fr: "être en couple", de: "ein Paar sein, in einer Beziehung sein" }, { fr: "déménager", de: "ausziehen, umziehen, wegziehen" },
                    { fr: "grandir", de: "wachsen" }, { fr: "faire la connaissance de quelqu'un", de: "jemanden kennen lernen" },
                ],
                "Berufsleben und Karriere": [
                    { fr: "débuter sa vie, sa carrière", de: "sein Leben beginnen / seine Karriere starten" }, { fr: "être acteur/actrice", de: "ein Schauspieler /eine Schauspielerin sein" },
                    { fr: "être comédien/comédienne", de: "ein Komödiant / eine Komödiantin sein" }, { fr: "être musicien/musicienne", de: "ein Musiker/ eine Musikerin sein" },
                    { fr: "être danseur/danseuse", de: "ein Tänzer/ eine Tänzerin sein" }, { fr: "travailler", de: "arbeiten" },
                    { fr: "faire ses débuts dans quelque chose", de: "sein Debüt mit etwas geben /in etwas debütieren / um etwas zu beginnen" },
                ],
                "Freizeit, Hobbys und Kultur": [
                    { fr: "s'intéresser à quelque chose", de: "sich für etwas interessieren" }, { fr: "le loisir", de: "die Freizeitbeschäftigung, das Hobby, die Freizeit" },
                    { fr: "la passion", de: "die Leidenschaft" }, { fr: "avoir une passion", de: "eine Leidenschaft haben" },
                    { fr: "être passionné , passionnée", de: "leidenschaftlich sein" }, { fr: "pratiquer une activité", de: "etwas aktiv betreiben, sich an einer Tätigkeit beteiligen" },
                    { fr: "quelques activités", de: "Einige Aktivitäten" }, { fr: "faire du théâtre", de: "Theater spielen" },
                    { fr: "faire du sport", de: "Sport machen/treiben" }, { fr: "faire de la musique", de: "Musik spielen/machen" },
                    { fr: "le temps libre", de: "die Freizeit" }, { fr: "le chant", de: "der Gesang" },
                    { fr: "la comédie", de: "die Komödie" }, { fr: "la danse", de: "der Tanz" },
                    { fr: "la musique", de: "die Musik" }, { fr: "jouer de la musique", de: "Musik spielen/ musizieren" },
                    { fr: "les loisirs", de: "die Freizeit" }, { fr: "les sorties", de: "die Ausgehmöglichkeiten" },
                    { fr: "le cinéma", de: "das Kino" }, { fr: "l'exposition (f)", de: "die Ausstellung" },
                    { fr: "le festival", de: "das Festival" }, { fr: "la pièce de théâtre", de: "das Theaterstück" },
                    { fr: "le théâtre", de: "das Theater" }, { fr: "le salon", de: "die Messe" },
                    { fr: "sortir", de: "ausgehen, hinausgehen, herauskommen" }, { fr: "aller au cinéma", de: "ins Kino gehen" },
                    { fr: "aller à un festival", de: "zu einem Festival gehen" }, { fr: "assister à un spectacle de...", de: "eine ...-Vorstellung besuchen, eine Show besuchen" },
                    { fr: "écouter un concert", de: "ein Konzert (an)hören" }, { fr: "visiter une expo(sition)", de: "eine Ausstellung besuchen" },
                    { fr: "voir une pièce de théâtre", de: "ein Theaterstück ansehen" }, { fr: "le spectacle", de: "das Spektakel, das Schauspiel, die Show, die Vorstellung" },
                    { fr: "le concert", de: "das Konzert" }, { fr: "la peinture", de: "die Malerei, das Gemälde, das Malen" },
                    { fr: "la sculpture", de: "die Skulptur, die Bildhauerei" },
                ],
                "Sport": [
                    { fr: "le football (le foot)", de: "der Fussball" }, { fr: "la gymnastique, la gym", de: "das Turnen, die Gymnastik" },
                    { fr: "quelques activités", de: "Einige Aktivitäten" }, { fr: "le canoë-kayak", de: "das Kanu-das Kajak ,der Kanusport" },
                    { fr: "l'escalade (f)", de: "das Klettern" }, { fr: "l'escrime (f)", de: "das Fechten" },
                    { fr: "le judo", de: "das Judo" }, { fr: "la pétanque", de: "das Boulespiel" },
                    { fr: "le tir à l'arc", de: "das Bogenschiessen" }, { fr: "le vélo", de: "das Fahrrad; das Fahrradfahren" },
                    { fr: "pratiquer un sport", de: "einen Sport ausüben, Sport treiben" }, { fr: "la boxe", de: "das Boxen" },
                    { fr: "l'équitation (faire du cheval)", de: "das Reiten (reiten)" },
                ],
                "Wettbewerb und Spiele": [
                    { fr: "la compétition", de: "der Wettkampf" }, { fr: "le concours", de: "der Wettbewerb" },
                    { fr: "la course", de: "der Lauf, das Rennen" }, { fr: "le match", de: "das Spiel, der Match" },
                    { fr: "les jeux", de: "die Spiele" }, { fr: "le jeu de société", de: "das Gesellschaftsspiel" },
                    { fr: "les échecs", de: "das Schachspiel" }, { fr: "les dominos", de: "das Dominospiel" },
                    { fr: "le jeu de dames", de: "das Damespiel" }, { fr: "le scrabble", de: "das Scrabble" },
                    { fr: "le jeu de cartes", de: "das Kartenspiel" }, { fr: "la belote", de: "Belote frz. Kartenspiel" },
                    { fr: "le tarot", de: "das Tarotspiel" }, { fr: "le jeu de hasard", de: "das Glücksspiel" },
                    { fr: "le loto", de: "das Lotto" }, { fr: "les jeux de dés", de: "das Würfelspiel" },
                    { fr: "le jeu en ligne", de: "das Online-Spiel" }, { fr: "le jeu vidéo", de: "das Videospiel, , das Computerspiel, das Game" },
                    { fr: "la console de jeux", de: "die Spielkonsole" }, { fr: "le poker", de: "das Poker" },
                    { fr: "la roulette", de: "das Roulette" },
                ],
                "Erfolg und Misserfolg": [
                    { fr: "réussir quelque chose", de: "etwas erreichen" }, { fr: "un amateur/une amatrice", de: "ein Liebhaber/eine Liebhaberin" },
                    { fr: "être amateur de quelque chose", de: "sich an etwas erfreuen / etwas lieben" }, { fr: "l'amateur (m), l'amatrice (f)", de: "der Amateur, die Amateurin" },
                    { fr: "le professionnel, la professionnelle", de: "der/die Fachmann, -frau, Profi" }, { fr: "un débutant/une débutante", de: "ein Anfänger/eine Anfängerin" },
                    { fr: "gagner", de: "gewinnen, siegen" }, { fr: "perdre", de: "verlieren" },
                    { fr: "le joueur, la joueuse", de: "der Spieler, die Spielerin" }, { fr: "le vainqueur, la vainqueure", de: "der Sieger, die Siegerin, der Gewinner, die Gewinnerin" },
                    { fr: "le gagnant, la gagnante", de: "der Gewinner, die Gewinnerin" }, { fr: "le perdant, la perdante", de: "der Verlierer, die Verliererin" },
                    { fr: "le champion, la championne", de: "der Meister, die Meisterin, der Champion" }, { fr: "le théâtre", de: "das Theater" },
                ]
            };

            const learningPlan = {
                1: {
                    title: "Tag 1: Verben sein & haben",
                    description: "Fokus: être (sein) und avoir (haben) im Präsens. Lerne die Konjugationen auswendig. Dies sind die wichtigsten Verben überhaupt!",
                    tasks: [
                        { content: `<h3>Grammatik: Unité 1 (Seite 6-8)</h3><p>Bearbeite die Übungen auf Seite 8.</p><h3>Wortschatz</h3><p>Lerne die Vokabeln der Kategorien "Wichtige Lernbegriffe" und "La vie et les relations".</p>`, vocabCategories: ["Wichtige Lernbegriffe", "La vie et les relations"]},
                        { content: `<h3>Aufgabe:</h3><p>Bilde mindestens 5 Sätze mit <strong>être</strong> und 5 Sätze mit <strong>avoir</strong>. Beispiel: "Je suis fatigué." (Ich bin müde), "Tu as un stylo." (Du hast einen Stift).` }
                    ]
                },
                2: {
                    title: "Tag 2: Es gibt & Das ist",
                    description: "Fokus: Il y a (Es gibt) und C'est / Ce sont (Das ist / Das sind). Merke dir den Unterschied zwischen Ein- und Mehrzahl.",
                    tasks: [
                        { content: `<h3>Grammatik: Unité 2 (Seite 9-11)</h3><p>Bearbeite die Übungen auf Seite 11.</p><h3>Wortschatz</h3><p>Lerne die Vokabeln der Kategorie "Berufsleben und Karriere".</p>`, vocabCategories: ["Berufsleben und Karriere"]},
                        { content: `<h3>Aufgabe:</h3><p>Beschreibe, was du in einem Raum siehst. Nutze <strong>Il y a</strong>, <strong>C'est</strong> und <strong>Ce sont</strong>. Beispiel: "Il y a une table. C'est une table. Ce sont des chaises." (Es gibt einen Tisch. Das ist ein Tisch. Das sind Stühle).` }
                    ]
                },
                3: {
                    title: "Tag 3: Verben auf -er & Freizeit",
                    description: "Fokus: Regelmässige Verben auf -er. Die Endungen sind immer gleich. Übe dies, bis es sitzt!",
                    tasks: [
                        { content: `<h3>Grammatik: Unité 3 (Seite 12-14)</h3><p>Bearbeite die Übungen auf Seite 14.</p><h3>Wortschatz</h3><p>Lerne die Vokabeln der Kategorie "Freizeit, Hobbys und Kultur".</p>`, vocabCategories: ["Freizeit, Hobbys und Kultur"]},
                        { content: `<h3>Aufgabe:</h3><p>Konjugiere die Verben 'travailler' (arbeiten) und 'aimer' (mögen/lieben) im Präsens. Schreib es auf oder sag es laut auf.` }
                    ]
                },
                4: {
                    title: "Tag 4: Machen & Nehmen",
                    description: "Fokus: faire (machen/tun) und prendre (nehmen). Diese sind unregelmässig, aber sehr häufig. Lerne die Formen auswendig.",
                    tasks: [
                        { content: `<h3>Grammatik: Unité 4 (Seite 15-17)</h3><p>Bearbeite die Übungen auf Seite 17.</p><h3>Wortschatz</h3><p>Lerne die Vokabeln der Kategorie "Sport".</p>`, vocabCategories: ["Sport"]},
                        { content: `<h3>Aufgabe:</h3><p>Bilde Sätze über deine Hobbys oder tägliche Routine mit <strong>faire</strong> und <strong>prendre</strong>. Beispiel: "Je fais du sport." (Ich mache Sport.), "Je prends le bus." (Ich nehme den Bus).` }
                    ]
                },
                5: {
                    title: "Tag 5: Bewegung & Pläne",
                    description: "Fokus: aller (gehen), venir (kommen) und partir (weggehen/abfahren). Mit diesen Verben kannst du über deine Wege und Reisen sprechen.",
                    tasks: [
                        { content: `<h3>Grammatik: Unité 5 (Seite 18-20)</h3><p>Bearbeite die Übungen auf Seite 20.</p><h3>Wortschatz</h3><p>Lerne die Vokabeln der Kategorien "Wettbewerb und Spiele" und "Erfolg und Misserfolg".</p>`, vocabCategories: ["Wettbewerb und Spiele", "Erfolg und Misserfolg"]},
                        { content: `<h3>Aufgabe:</h3><p>Bilde mindestens 3 Sätze mit jedem Verb. Beispiel: "Je vais au cinéma." (Ich gehe ins Kino.), "Tu viens à la fête?" (Kommst du zur Party?), "Nous partons en vacances." (Wir fahren in den Urlaub).` }
                    ]
                },
                6: {
                    title: "Tag 6: Wiederholung & Bilan",
                    description: "Heute wird alles wiederholt. Bearbeite die Bilan-Übungen, um dein Wissen zu überprüfen.",
                    tasks: [
                        { content: `<h3>Grammatik: Bilan N° 1 (Seite 21-23)</h3><p>Bearbeite die Übungen auf den Seiten 21 bis 23. Schlage bei Unsicherheiten in den jeweiligen Kapiteln nach.</p><h3>Wortschatz</h3><p>Wiederhole ALLE Vokabeln, die du bisher gelernt hast. Nutze die interaktiven Karteikarten im Wortschatz-Bereich.</p>` }
                    ]
                },
                7: {
                    title: "Tag 7: Letzte Prüfung & Feiern",
                    description: "Es ist der 1. Oktober! Teste dich ein letztes Mal selbst und belohne dich danach!",
                    tasks: [
                        { content: `<h3>Finale Wiederholung</h3><p>Gehe noch einmal die Bilan-Übungen durch. Lies die Dialoge von Unité 1 bis 5 und versuche, so viel wie möglich zu verstehen. Schaffe es, ohne die deutsche Übersetzung zu denken.</p><h3>Aufgabe:</h3><p>Fasse in 3-5 französischen Sätzen zusammen, was du in den letzten 7 Tagen gelernt hast. Beispiel: "J'ai appris les verbes être et avoir. J'ai aussi appris à parler de mes loisirs."</p><h3>Erfolg feiern:</h3><p>Du hast es geschafft! Geniesse eine Pause und feiere deinen Erfolg.</p>` }
                    ]
                },
                8: {
                    title: "Gesamter Wortschatz",
                    description: "Hier findest du alle Vokabeln. Du kannst sie nach Kategorie filtern oder direkt nach einem Wort suchen."
                }
            };
            
            const contentContainer = document.getElementById('content-container');
            const dayButtons = document.querySelectorAll('.day-btn');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');

            function createVocabCards(categories) {
                let html = '<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-4">';
                categories.forEach(cat => {
                    if (vocabulary[cat]) {
                        vocabulary[cat].forEach(voc => {
                            html += `
                                <div class="vocab-card">
                                    <div class="vocab-card-inner">
                                        <div class="vocab-card-front">
                                            <div>
                                                <p class="font-semibold">${voc.fr}</p>
                                                <p class="text-xs text-stone-500">${cat}</p>
                                            </div>
                                        </div>
                                        <div class="vocab-card-back">${voc.de}</div>
                                    </div>
                                </div>`;
                        });
                    }
                });
                html += '</div>';
                return html;
            }
            
            function createAccordion(tasks) {
                let html = '';
                tasks.forEach(task => {
                    const hasVocab = task.vocabCategories && task.vocabCategories.length > 0;
                    html += `
                    <div class="task-card">
                        <button class="accordion-header w-full text-left">
                            <h3 class="text-xl font-semibold text-teal-700 flex justify-between items-center">
                                Aufgabe
                                <span class="transform transition-transform duration-300 ">▼</span>
                            </h3>
                        </button>
                        <div class="accordion-content mt-4 text-stone-700">
                            ${task.content}
                            ${hasVocab ? createVocabCards(task.vocabCategories) : ''}
                        </div>
                    </div>`;
                });
                return html;
            }

            function generateDayContent() {
                for (let i = 1; i <= 7; i++) {
                    const dayData = learningPlan[i];
                    const section = document.createElement('section');
                    section.id = `day-${i}`;
                    section.className = 'day-content hidden';
                    section.innerHTML = `
                        <div class="text-center mb-6 p-6 bg-white rounded-lg shadow-md">
                            <h2 class="text-3xl font-bold">${dayData.title}</h2>
                            <p class="mt-2 text-stone-600">${dayData.description}</p>
                        </div>
                        <div>
                            ${createAccordion(dayData.tasks)}
                        </div>
                    `;
                    contentContainer.appendChild(section);
                }
            }
            
            function showDay(dayNumber) {
                document.querySelectorAll('.day-content').forEach(el => el.classList.add('hidden'));
                const activeDay = document.getElementById(`day-${dayNumber}`);
                if (activeDay) {
                    activeDay.classList.remove('hidden');
                }

                dayButtons.forEach(btn => btn.classList.remove('active'));
                const activeButton = document.querySelector(`.day-btn[data-day="${dayNumber}"]`);
                if(activeButton) {
                    activeButton.classList.add('active');
                }

                const progress = dayNumber <= 7 ? ((dayNumber / 7) * 100).toFixed(0) : 100;
                progressBar.style.width = `${progress}%`;
                
                if (dayNumber <= 7) {
                    progressText.textContent = `Du bearbeitest gerade Tag ${dayNumber} von 7.`;
                } else if (dayNumber == 8) {
                     progressText.textContent = `Wortschatz-Modus. Dein Lernplan ist zu 100% abgeschlossen!`;
                }
            }

            generateDayContent();

            dayButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const dayNum = button.dataset.day;
                    showDay(dayNum);
                });
            });

            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('span');
                    
                    if (content.style.display === "block") {
                        content.style.display = "none";
                        icon.style.transform = "rotate(0deg)";
                    } else {
                        content.style.display = "block";
                        icon.style.transform = "rotate(180deg)";
                    }
                });
            });
            
            document.body.addEventListener('click', function(e) {
                if (e.target.closest('.vocab-card')) {
                    e.target.closest('.vocab-card').classList.toggle('is-flipped');
                }
            });

            // Vocabulary Section Logic
            const fullVocabListContainer = document.getElementById('full-vocab-list');
            const vocabSearch = document.getElementById('vocabSearch');
            const vocabFilter = document.getElementById('vocabFilter');
            
            function populateFullVocabList() {
                let allVocab = [];
                for (const category in vocabulary) {
                    vocabulary[category].forEach(voc => {
                        allVocab.push({ ...voc, category });
                    });
                }
                renderVocab(allVocab);

                const categories = Object.keys(vocabulary);
                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.textContent = cat;
                    vocabFilter.appendChild(option);
                });
            }

            function renderVocab(vocabArray) {
                fullVocabListContainer.innerHTML = vocabArray.map(voc => `
                    <div class="vocab-card">
                        <div class="vocab-card-inner">
                            <div class="vocab-card-front">
                                <div>
                                    <p class="font-semibold">${voc.fr}</p>
                                    <p class="text-xs text-stone-500">${voc.category}</p>
                                </div>
                            </div>
                            <div class="vocab-card-back">${voc.de}</div>
                        </div>
                    </div>
                `).join('');
            }
            
            function filterAndSearchVocab() {
                const searchTerm = vocabSearch.value.toLowerCase();
                const selectedCategory = vocabFilter.value;

                let filteredVocab = [];
                 for (const category in vocabulary) {
                    vocabulary[category].forEach(voc => {
                        filteredVocab.push({ ...voc, category });
                    });
                }

                if (selectedCategory !== 'all') {
                    filteredVocab = filteredVocab.filter(voc => voc.category === selectedCategory);
                }

                if (searchTerm) {
                    filteredVocab = filteredVocab.filter(voc => 
                        voc.fr.toLowerCase().includes(searchTerm) || 
                        voc.de.toLowerCase().includes(searchTerm)
                    );
                }
                
                renderVocab(filteredVocab);
            }

            vocabSearch.addEventListener('keyup', filterAndSearchVocab);
            vocabFilter.addEventListener('change', filterAndSearchVocab);

            populateFullVocabList();
            
            // Chart.js implementation
            const ctx = document.getElementById('planChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Tag 1-2: être & avoir', 'Tag 3: -er Verben', 'Tag 4: faire & prendre', 'Tag 5: aller & venir & partir', 'Tag 6-7: Wiederholung & Bilan'],
                    datasets: [{
                        label: 'Lernfokus',
                        data: [25, 15, 15, 15, 30],
                        backgroundColor: [
                            '#5eead4', // teal-300
                            '#2dd4bf', // teal-400
                            '#0d9488', // teal-600
                            '#115e59',  // teal-800
                            '#064e3b'  // teal-900
                        ],
                        borderColor: '#f5f5f4',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: 'Inter',
                                },
                                boxWidth: 12,
                                padding: 15,
                            }
                        },
                        tooltip: {
                             bodyFont: {
                                family: 'Inter',
                            },
                             titleFont: {
                                family: 'Inter',
                            },
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
